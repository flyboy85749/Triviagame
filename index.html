<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trivia Game</title>

    <!-- add our standard css files, in the correct order -->

    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>





    <div class="container">
        <div class="jumbotron jumbotron-fluid">
            <div class="container">
                <div class="row">
                    <!---------------------------------- begin row 1 ------------------------------->
                    <div class="col-9">
                        <h1 class="display-3">Super Duper Trivia Game!</h1>
                    </div>
                    <div class="col-3">

                        <h3 class="time-remaining">Countdown Clock here</h3>
                        <p class="rules-text">Rules</p>


                    </div>
                </div>
                <!-------------------- end row 1 ------------------------>
                <div class="row">
                    <div class="col">
                        <h2 class="category">Category: Science/Computers</h2>

                    </div>
                </div>
                <div class="row">
                    <!------------- begin row 2 ---------------->


                    <div class="col">
                        <div class="card">
                            <!-- <img class="card-img-top" src="holder.js/100x180/" alt=""> -->
                            <div class="card-body">
                                <p id="time-left"></p>
                                <h4 class="card-title question">Question:</h4>
                                <p class="card-text question-text"></p>

                                <p class="incorrect"></p>
                            </div>
                        </div>

                    </div>
                    <div class="col">
                        <div class="card">
                            <!-- <img class="card-img-top" src="holder.js/100x180/" alt=""> -->
                            <div class="card-body">
                                <p id="time-left"></p>
                                <h4 class="card-title question">Answers:</h4>
                                <p class="card-text answer-text"></p>

                                <p class="incorrect"></p>
                            </div>
                        </div>

                    </div>
                </div>
                <!---------------------------------- end row 2 ------------------------------->
            </div>
        </div>
        <div class="row">
            <div class="col">
                <p class="lead">
                    <p>Ready to Play?</p>
                    <a class="btn btn-primary btn-lg start" href="Jumbo action link" role="button">Start Game</a>
                </p>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        var correct = 0;
        var wrong = 0;

        var twentyFive = setTimeout(function () {
            nextQuestion();
        }, 25000);

        var queryURL = "https://opentdb.com/api.php?amount=10&category=18&difficulty=medium&type=multiple";

        function alertButtonPush() {
            var buttonPush = $(this).attr("data-name");

            alert(buttonPush);
        }

        function renderButtons(answers) {

            //     // YOUR CODE GOES HERE

            // empty div
            $(".answer-text").empty();

            for (i = 0; i < answers.length; i++) {



                //         // store for use with all buttons
                var button = $("<button>");

                //         // add a class that we can target
                button.addClass("answer");

                //         // add an attribute
                button.attr("data-name", answers[i]);

                //         // add the text for the buttons
                button.text(answers[i]);

                //         // now, display the buttons
                $(".answer-text").append(button);
            }

        }

        $(".start").click(startGame);

        function startGame(event) {
            // set starting conditions
            event.preventDefault();

            twentyFive = setTimeout(function () {
                nextQuestion();
            }, 25000);

            correct = 0;
            wrong = 0;

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response.results);

                // assign variable to hold category for questions 
                var category = [response.results[1].category];

                // display on page
                $(".category").html("The category is: " + category);


                // assign a variable question to redisplay questions with
                var question = $(".question-text").html(response.results[1].question);

                // do the same thing with answers
                // create an array with wrong answers, then add correct answer
                var answers = response.results[1].incorrect_answers; // incorrect answers

                var answer = response.results[1].correct_answer; // correct answer

                answers.push(answer);
                console.log(answers);
                // var test = answer.join("-");
                // console.log(test);
                //  $(".answer-text").html(answer.join(" "));

                renderButtons(answers);
            });

            $(document).on("click", ".answer", alertButtonPush);

            function nextQuestion() {
                if (button) {
                    alert("That is the correct answer!");
                    correct++;
                }
                else {
                    alert("That answer is incorrect");
                    wrong++;
                }
            }

        }








            // note to self: put the answers automatically in input fields, so they don't know the correct answer is the
            // first one. Randomly pull them in

            // format the api info before displaying it
    </script>
    <!-- <script type="text/javascript" src="assets/javascript/app.js"></script> -->
</body>

</html>